挖矿是帮助创建新的交易区块以添加到以太坊区块链网络的过程。它还有助于保持网络的安全，使其免受攻击。

就像比特币一样，以太坊正在使用工作证明（PoW）共识机制，这在很大程度上依赖于挖矿。以太坊矿工利用他们的时间和计算能力来处理新传入的交易，并产生新的区块，直到以太坊升级到工作证明共识机制（PoS）。

> 2022年9月15日执行的Ethereum合并，用Proof-of-Stake取代了工作证明。这大大改变了新区块的生产方式，减少了约99.95%的能源消耗。

## 为什么会有矿工的存在

大多数人认为，挖矿只是增加新交易和创造新币的一种方式。但是，我们上面提到，挖矿也有助于保持网络安全。为什么这么说呢？

在像以太坊这样的去中心化系统中，我们需要确保世界上每个人都同意交易的顺序。

例如，如果Alice给Bob发送了1个ETH，他又将其发送给Charlie，那么交易的顺序就需要如下

爱丽丝-->鲍勃 1个ETH

鲍勃-->查理 1个ETH

任何其他的交易顺序都是不可行的，重要的是每个人都同意这一点。

因此，矿工也负责验证区块链网络上的加密货币交易，并将其添加到账簿中。重要的是，这个过程可以防止数字货币的重复消费。

## 为什么有人会成为一名矿工？

就像实物货币一样，当有人执行交易时，区块链的状态必须被更新，以反映每个相关账户的借记/贷记。

然而，数字平台很容易受到攻击，而且可以被操纵。因此，矿工不仅要提出新的区块并验证所有的交易，他们还需要出具一份合法性证书，证明其提出的区块中的所有交易都是有效的。

生成这个证书是一个计算上的困难和复杂的挑战。这就是所有 "工作证明 "的意义所在。我们将在以后的教程中更深入地讨论这个问题，但现在，只要知道制作这个证书是相当困难的。

但是，给定一个合法的证书，第三方要验证它是否有效是非常容易的。

对于矿工制作这些证书和执行交易的辛勤工作，他们会以新币的形式获得奖励。在以太坊中，当矿工成功开采一个区块时，他们的辛勤工作会得到2个ETH。以太坊一开始的区块奖励是5个ETH，但随着2017年拜占庭的升级，这个奖励降到了3个ETH，然后在2019年君士坦丁堡的升级中再次降到2个ETH。

由于去中心化系统缺乏中央自主权，挖矿过程对网络的安全性和有效性极为关键。因此，挖矿奖励起到了激励参与交易验证过程的作用。

## 谁可以成为矿工？
从技术上讲，任何人都可以通过运行Ethereum节点软件成为Ethereum的矿工。然而，并不是每个人都能开采以太坊获利。

在大多数情况下，矿工购买专门的硬件来挖矿获利。普通电脑不太可能赚取足够的挖矿奖励来支付挖矿的相关电力和硬件成本。

## 以太坊交易是如何被挖掘出来的？

1. 用户从他们的账户中签署一个交易请求

2. 该交易通过一个节点被广播到以太坊网络上

3. 听到新的交易后，网络中的每个节点都将交易添加到他们的本地mempool（内存池）。内存池是一个节点听说过但尚未被纳入区块的交易的列表。

4. 在某些时候，矿工将大量的交易组合成一个潜在的区块，其方式是使他们赚取的交易费用最大化，同时保持在区块气体限制之下。然后。

   1. 矿工验证每笔交易的有效性。这包括检查是否有人试图转移他们不拥有的以太坊，或签名无效，或请求是畸形的，等等。
   2. 然后，矿工在他们的以太坊虚拟机（EVM）的本地副本上执行该交易。它将每个此类请求的交易费用授予他们自己的账户。
   3. 矿工在区块中的所有交易被验证并在其本地EVM上执行后，开始为整个区块创建工作证明的合法性证书的过程。

5. 最终，矿工完成了区块的合法性证书的制作，其中包括用户的交易。然后，矿工将完成的区块广播给全世界，其中包括证书和区块链的新状态信息。

6. 其他节点听说了这个新区块。他们验证证书（这很容易做到），在他们的EVM本地副本上执行区块中的所有交易，并验证他们的EVM状态与矿工提议的状态一致。

7. 一旦其他节点验证了矿工提出的所有内容，他们就会把这个区块添加到他们的区块链节点中，并接受新的EVM状态作为 "区块链的当前状态"。

8. 每个节点从他们的本地mempool中删除包含在该区块内的交易。

9. 这个过程重复进行。

   

## 不同的挖矿方法

在技术的早期，当成为矿工相当容易时，大多数矿工使用基于CPU的采矿，在他们的台式机和笔记本电脑上运行。然而，CPU挖矿在当今时代是相当缓慢和不切实际的，因为它可能需要几个月的时间来赚取哪怕是极少的挖矿奖励，同时不断地以100%的容量运行你的CPU，并支付高额的电力费用。

基于GPU的挖矿是目前最常见的方法。这种方法可以最大限度地提高计算能力，将多个GPU集中在一台挖矿设备上，让它们并行工作，从而提高一台设备的整体容量和吞吐量。

特定应用集成电路（ASIC）采矿也相当流行。这些是专门为开采以太坊设计的硬件芯片。你可以在网上为大多数流行的区块链网络购买ASIC。然而，它们很昂贵，而且随着越来越多的矿工加入网络，挖矿变得越来越难，硬件很快就会被淘汰。一个全新的ASIC通常最多只能维持1-2年。

## 矿池

大多数个人矿工没有足够的资源来建立拥有数千个GPU和ASIC的巨大采矿设施。矿池允许矿工结合他们的计算资源，以增加他们开采区块的机会。如果矿池中的任何人成功挖到一个区块，奖励将根据他们对矿池贡献的计算能力按比例分配给矿池中的每个人。

## 挖矿的视觉演示

https://www.youtube.com/watch?v=zcX7OJ-L8XQ

## 资源

以下是额外推荐的、但可选择的阅读和观看内容，以了解更多关于采矿的信息。

- [What does it mean to mine Ethereum?](https://ethereum.org/en/developers/docs/consensus-mechanisms/pow/mining/)
- [Top Ethereum Miners](https://etherscan.io/accounts/label/mining)
- [Etherscan Mining Calculator](https://etherscan.io/ether-mining-calculator)